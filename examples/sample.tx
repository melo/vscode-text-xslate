<!DOCTYPE html>
<html>
<head>
    <title><: $page.title | html :></title>
</head>
<body>
    <:# This is a comment within tags :>

    : # Line comment
    : my $greeting = "Hello"

    <h1><: $greeting :>, <: $user.name | html :>!</h1>

    : # Conditional statements
    <: if $user.is_admin { :>
        <div class="admin-panel">
            <p>Welcome, administrator!</p>
        </div>
    <: } elsif $user.is_member { :>
        <div class="member-area">
            <p>Member since: <: $user.created_at :></p>
        </div>
    <: } else { :>
        <p>Please <a href="/login">log in</a>.</p>
    <: } :>

    : # Line-based conditionals
    : if $user.logged_in {
        <p>Welcome back, <: $user.name | html :>!</p>
        <p>Your last visit was <: $user.last_visit :></p>
    : } else {
        <p>Please log in to continue.</p>
    : }

    <:# Loop examples :>
    <ul>
    : for $items -> $item {
        <li>
            <strong><: $item.name | html :></strong>
            <span class="price">$<: $item.price :></span>
            : if $item.on_sale {
                <span class="sale">On Sale!</span>
            : }
        </li>
    : }
    </ul>

    <:# Raw output (unescaped) :>
    <div class="content">
        <:= $article.html_content :>
    </div>

    <:# Filters and method calls :>
    <p>Total: <: $cart.total() | number_format(2) :></p>
    <p>URL: <: $page.url | uri :></p>
    <p><: $description | html :></p>

    <:# Variables and operators :>
    : my $count = $items.size()
    : my $has_items = $count > 0
    : my $message = $has_items ? "You have " ~ $count ~ " items" : "Cart is empty"
    <p><: $message :></p>
    <p>Total items: <: $count :></p>

    <:# Hash and array literals :>
    : my $config = { debug => true, max_items => 100, version => "1.0" }
    : my $colors = ["red", "green", "blue"]

    <:# Array and hash methods :>
    <p>First color: <: $colors.first() :></p>
    <p>Config keys: <: $config.keys().join(", ") :></p>

    <:# Special variables :>
    <p>File: <: __FILE__ :></p>
    <p>Line: <: __LINE__ :></p>

    <:# Macro example :>
    : macro render_user -> $user {
        <div class="user">
            <h3><: $user.name :></h3>
            <p><: $user.email :></p>
        </div>
    : }

    <:# HTML attributes with embedded expressions :>
    <div class="user-status <: $user.is_active ? 'active' : 'inactive' :>">
        <img src="<: $user.avatar_url :>" alt="<: $user.name | html :>'s avatar">
        <a href="/user/<: $user.id :>" title="View <: $user.name | html :>'s profile">
            <: $user.name | html :>
        </a>
        <button onclick="alert('User ID: <: $user.id :>')">Show ID</button>
        <input type="text" value="<: $form.field_value | html :>" placeholder="Enter <: $field.label :>">
    </div>

    <:# Include and cascade :>
    <: include "partials/footer.tx" :>

    <:# Block definition for template inheritance :>
    : block content -> {
        <p>Default content here</p>
    : }

    : # Comments in Text::Xslate Kolon are line-based only
    : # There are no multi-line block comments in Kolon syntax

</body>
</html>